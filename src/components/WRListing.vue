<script setup>
import { defineProps, ref, computed } from 'vue';
import { RouterLink } from 'vue-router';
import Button from 'primevue/button'
import 'primeicons/primeicons.css'

const props = defineProps({
  time: Object,
});

const getCategory = (category, cc) => {
    switch (category) {
        case 0:
            return "150cc No-Shortcut"
        case 1:
            return "150cc Glitch"
        case 2:
            return "150cc No-Shortcut"
        case 3:
            return "150cc TAS"
        case 4:
            return "200cc No-Shortcut"
        case 5:
            return "200cc Glitch"
        case 6:
            return "200cc No-Shortcut"
        case 7:
            return "200cc TAS"
        case 16:
            return "150cc Shortcut"
        case 20:
            return "200cc Shortcut"
        default:
            if (cc == true) {
                return "200cc No-Shortcut"
            } else {
                return "150cc No-Shortcut"
            }
    }   
} 

const getFlagEmoji = (region) => {
    switch(region) {
        case (1): return 'ðŸ‡¯ðŸ‡µ' 
        case (8): return 'ðŸ‡¦ðŸ‡®' 
        case (9): return 'ðŸ‡¦ðŸ‡¬' 
        case (10): return 'ðŸ‡¦ðŸ‡·' 
        case (11): return 'ðŸ‡¦ðŸ‡¼' 
        case (12): return 'ðŸ‡§ðŸ‡¸' 
        case (13): return 'ðŸ‡§ðŸ‡§' 
        case (14): return 'ðŸ‡§ðŸ‡¿' 
        case (15): return 'ðŸ‡§ðŸ‡´' 
        case (16): return 'ðŸ‡§ðŸ‡·' 
        case (17): return 'ðŸ‡»ðŸ‡¬'
        case (18): return 'ðŸ‡¨ðŸ‡¦' 
        case (19): return 'ðŸ‡°ðŸ‡¾' 
        case (20): return 'ðŸ‡¨ðŸ‡±' 
        case (21): return 'ðŸ‡¨ðŸ‡´' 
        case (22): return 'ðŸ‡¨ðŸ‡·' 
        case (23): return 'ðŸ‡©ðŸ‡²' 
        case (24): return 'ðŸ‡©ðŸ‡´' 
        case (25): return 'ðŸ‡ªðŸ‡¨' 
        case (26): return 'ðŸ‡¸ðŸ‡»' 
        case (27): return 'ðŸ‡¬ðŸ‡«' 
        case (28): return 'ðŸ‡¬ðŸ‡©' 
        case (29): return 'ðŸ‡¬ðŸ‡µ' 
        case (30): return 'ðŸ‡¬ðŸ‡¹' 
        case (31): return 'ðŸ‡¬ðŸ‡¾' 
        case (32): return 'ðŸ‡­ðŸ‡¹' 
        case (33): return 'ðŸ‡­ðŸ‡³' 
        case (34): return 'ðŸ‡¯ðŸ‡²' 
        case (35): return 'ðŸ‡²ðŸ‡¶' 
        case (36): return 'ðŸ‡²ðŸ‡½' 
        case (37): return 'ðŸ‡²ðŸ‡¸' 
        case (38): return 'ðŸ³ï¸' 
        case (39): return 'ðŸ‡³ðŸ‡®'
        case (40): return 'ðŸ‡µðŸ‡¦'
        case (41): return 'ðŸ‡µðŸ‡¾'
        case (42): return 'ðŸ‡µðŸ‡ª'
        case (43): return 'ðŸ‡°ðŸ‡³' 
        case (44): return 'ðŸ‡±ðŸ‡¨' 
        case (45): return 'ðŸ‡»ðŸ‡¨' 
        case (46): return 'ðŸ‡¸ðŸ‡·'
        case (47): return 'ðŸ‡¹ðŸ‡¹' 
        case (48): return 'ðŸ‡¹ðŸ‡¨' 
        case (49): return 'ðŸ‡ºðŸ‡¸' 
        case (50): return 'ðŸ‡ºðŸ‡¾'
        case (51): return 'ðŸ‡»ðŸ‡®' 
        case (52): return 'ðŸ‡»ðŸ‡ª'
        case (64): return 'ðŸ‡¦ðŸ‡±'
        case (65): return 'ðŸ‡¦ðŸ‡º'
        case (66): return 'ðŸ‡¦ðŸ‡¹'
        case (67): return 'ðŸ‡§ðŸ‡ª'
        case (68): return 'ðŸ‡§ðŸ‡¦' 
        case (69): return 'ðŸ‡§ðŸ‡¼' 
        case (70): return 'ðŸ‡§ðŸ‡¬' 
        case (71): return 'ðŸ‡­ðŸ‡·' 
        case (72): return 'ðŸ‡¨ðŸ‡¾' 
        case (73): return 'ðŸ‡¨ðŸ‡¿' 
        case (74): return 'ðŸ‡©ðŸ‡°' 
        case (75): return 'ðŸ‡ªðŸ‡ª' 
        case (76): return 'ðŸ‡«ðŸ‡®' 
        case (77): return 'ðŸ‡«ðŸ‡·' 
        case (78): return 'ðŸ‡©ðŸ‡ª' 
        case (79): return 'ðŸ‡¬ðŸ‡·' 
        case (80): return 'ðŸ‡­ðŸ‡º' 
        case (81): return 'ðŸ‡®ðŸ‡¸' 
        case (82): return 'ðŸ‡®ðŸ‡ª' 
        case (83): return 'ðŸ‡®ðŸ‡¹' 
        case (84): return 'ðŸ‡±ðŸ‡»' 
        case (85): return 'ðŸ‡±ðŸ‡¸' 
        case (86): return 'ðŸ‡±ðŸ‡®' 
        case (87): return 'ðŸ‡±ðŸ‡¹' 
        case (88): return 'ðŸ‡±ðŸ‡º' 
        case (89): return 'ðŸ‡²ðŸ‡°' 
        case (90): return 'ðŸ‡²ðŸ‡¹' 
        case (91): return 'ðŸ‡·ðŸ‡¸' 
        case (92): return 'ðŸ‡²ðŸ‡¿' 
        case (93): return 'ðŸ‡³ðŸ‡¦' 
        case (94): return 'ðŸ‡³ðŸ‡±' 
        case (95): return 'ðŸ‡³ðŸ‡¿' 
        case (96): return 'ðŸ‡³ðŸ‡´' 
        case (97): return 'ðŸ‡µðŸ‡±' 
        case (98): return 'ðŸ‡µðŸ‡¹' 
        case (99): return 'ðŸ‡·ðŸ‡´' 
        case (100): return 'ðŸ‡·ðŸ‡º'
        case (101): return 'ðŸ‡·ðŸ‡¸'
        case (102): return 'ðŸ‡¸ðŸ‡°'
        case (103): return 'ðŸ‡¸ðŸ‡®'
        case (104): return 'ðŸ‡¿ðŸ‡¦'
        case (105): return 'ðŸ‡ªðŸ‡¸'
        case (106): return 'ðŸ‡¸ðŸ‡¿'
        case (107): return 'ðŸ‡¸ðŸ‡ª'
        case (108): return 'ðŸ‡¨ðŸ‡­'
        case (109): return 'ðŸ‡¹ðŸ‡·'
        case (110): return 'ðŸ‡¬ðŸ‡§'
        case (111): return 'ðŸ‡¿ðŸ‡²'
        case (112): return 'ðŸ‡¿ðŸ‡¼'
        case (113): return 'ðŸ‡¦ðŸ‡¿'
        case (114): return 'ðŸ‡²ðŸ‡·'
        case (115): return 'ðŸ‡²ðŸ‡±'
        case (116): return 'ðŸ‡³ðŸ‡ª'
        case (117): return 'ðŸ‡¹ðŸ‡©'
        case (118): return 'ðŸ‡¸ðŸ‡©'
        case (119): return 'ðŸ‡ªðŸ‡·'
        case (120): return 'ðŸ‡©ðŸ‡¯'
        case (121): return 'ðŸ‡¸ðŸ‡´'
        case (128): return 'ðŸ‡¿ðŸ‡¼'
        case (144): return 'ðŸ‡°ðŸ‡·'
        case (145): return 'ðŸ‡­ðŸ‡°'
        case (148): return 'ðŸ‡¹ðŸ‡¼'
        case (152): return 'ðŸ‡®ðŸ‡©'
        case (153): return 'ðŸ‡¸ðŸ‡¬'
        case (154): return 'ðŸ‡¹ðŸ‡­'
        case (155): return 'ðŸ‡µðŸ‡­'
        case (156): return 'ðŸ‡²ðŸ‡¾'
        case (160): return 'ðŸ‡¨ðŸ‡³'
        case (168): return 'ðŸ‡¦ðŸ‡ª'
        case (169): return 'ðŸ‡®ðŸ‡³'
        case (170): return 'ðŸ‡¬ðŸ‡¶'
        case (171): return 'ðŸ‡´ðŸ‡²'
        case (172): return 'ðŸ‡¶ðŸ‡¦'
        case (173): return 'ðŸ‡°ðŸ‡¼'
        case (174): return 'ðŸ‡¸ðŸ‡¦'
        case (175): return 'ðŸ‡¸ðŸ‡¾'
        case (176): return 'ðŸ‡§ðŸ‡­'
        case (177): return 'ðŸ‡¯ðŸ‡´'
        default: return ''
    }
}
const getPlayerId = (href) => {
    let part1 = href.substring(9, 11)
    let part2 = href.substring(12, href.length-5)
    return part1 + part2
}

const formatDate = (isoString) => {
    const date = new Date(isoString);
    return date.toLocaleString();
}
</script>

<template>
  <div class="wrCard overflow-auto bg-gray-800 rounded-xl shadow-xl outline outline-offset-4 outline-2 ring-4 ring-indigo-300 hover:-translate-y-1 hover:scale-103 hover:bg-gray-700 duration-300">
    <div class="p-4">
      <div class="mkwMenu mb-6 flex items-center justify-between">
        <div>
            <div class="text-neutral-700 font-bold my-2 text-xl">{{ time.trackName }}</div>
            <div class="text-neutral-700 font-semibold my-2 text-medium">{{ getCategory(time.categoryId, time["200cc"]) }}</div>
            <div class="text-neutral-700 text-xl font-bold">{{ time.finishTimeSimple }}</div>
            <div class="text-white text-2xl font-bold my-2" id="miiName">{{ getFlagEmoji(time.country) + ' ' + time.player }}</div>
            <div class="text-neutral-700 text-xs font-semibold">{{ formatDate(time.dateSet) }}</div>
        </div>
        <img class="h-24 w-auto" :src="'https://www.chadsoft.co.uk/time-trials' + time._links.item.href.substring(0, time._links.item.href.length-5) + '.mii'" />
      </div>

      <!-- <div class="border border-gray-100 mb-3"></div> -->
      <Button as="a" label="Ghost Link" icon="pi pi-angle-right" rounded :href="'https://www.chadsoft.co.uk/time-trials' + time._links.item.href.substring(0, time._links.item.href.length-5) + '.html'"/>
      <Button as="RouterLink" label="Profile" icon="pi pi-user" class="mx-3" rounded :to="'/player/' + getPlayerId(time._links.player.href)"/>

    </div>
  </div>
</template>
